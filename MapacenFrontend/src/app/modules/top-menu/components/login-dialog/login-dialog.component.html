<div class="mainColor container">
  <div class="chuj">
    <h1
      mat-dialog-title
      class="title"
    >
      <span *ngIf="login">
        Logowanie
      </span>
      <span *ngIf="!login">
        Rejestracja
      </span>
    </h1>
    <div *ngIf="login; else register">
      <form [formGroup]="loginForm">
        <div mat-dialog-content>
          <div class="fix backgroundColor">
            <my-input
              controlName="email"
              type="email"
              label="E-mail"
            >
            </my-input>
          </div>
          <div class="fix backgroundColor">
            <my-input
              controlName="password"
              type="text"
              label="Hasło"
              [type]="passwordMode"
              [suffixTemplate]="icon"
            >
            </my-input>
          </div>
        </div>
      </form>
    </div>
    <ng-template #register>
      <form [formGroup]="registerForm">
        <div mat-dialog-content>
          <div class="fix backgroundColor">
            <my-input
              controlName="email"
              type="email"
              label="E-mail"
            >
            </my-input>
          </div>
          <div class="fix backgroundColor">
            <my-input
              controlName="name"
              type="text"
              label="Nazwa użytkownika"
            >
            </my-input>
          </div>
          <mat-form-field
            appearance="outline"
            class="backgroundColor fix"
            (click)="openState()"
          >
            <mat-label>Powiat</mat-label>
            <input
              type="text"
              placeholder="Wybierz powiat"
              matInput
              [formControl]="myCountyControl"
              [matAutocomplete]="powiat"
              (ngModelChange)="checkCountyInput($event)"
              (click)="openState()"
            >
            <mat-icon
              matSuffix
              (click)="openState()"
            >
              <span *ngIf="openedCounties">keyboard_arrow_up</span>
              <span *ngIf="!openedCounties">keyboard_arrow_down</span>
            </mat-icon>
            <mat-autocomplete
              #powiat="matAutocomplete"
              (optionSelected)="selectedCounty($event)"
              (closed)="closeState()"
            >
              <mat-option
                *ngFor="let option of filteredCounties | async"
                [value]="option"
              >
                {{ option }}
              </mat-option>
            </mat-autocomplete>
          </mat-form-field>
          <div class="fix backgroundColor">
            <my-input
              controlName="password"
              type="text"
              label="Hasło"
              [type]="passwordMode"
              [suffixTemplate]="icon"
            >
            </my-input>
          </div>
          <div class="fix backgroundColor">
            <my-input
              controlName="confirmedPassword"
              type="text"
              label="Powtórz hasło"
              [type]="passwordMode"
              [suffixTemplate]="icon"
            >
            </my-input>
          </div>
        </div>
      </form>
    </ng-template>
    <div class="position">
      <button
        class="button"
        mat-stroked-button
        (click)="handleFormSubmit()"
      >
        <span *ngIf="!login">
          Zarejestruj się
        </span>
        <span *ngIf="login">
          Zaloguj się
        </span>
      </button>
    </div>
  </div>
  <div class="position--gap">
    <hr>
    <div class="position position--gap">
      <span *ngIf="login">
        Nie masz konta w serwisie?
      </span>
      <span *ngIf="!login">
        Masz już konto?
      </span>
      <button
        class="changeButton"
        mat-stroked-button
        (click)="change()"
      >
        <span *ngIf="login">
          Zarejestruj się
        </span>
        <span *ngIf="!login">
          Zaloguj się
        </span>
      </button>
    </div>
  </div>
</div>

<ng-template #icon>
  <mat-icon
    class="icon"
    matSuffix
    (click)="togglePasswordVisibility()"
  >
    {{ hiddenPassword ? 'visibility_off' : 'visibility' }}
  </mat-icon>
</ng-template>